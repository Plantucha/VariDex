============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-9.0.2, pluggy-1.6.0 -- /media/michal/647A504F7A50205A/GENOME/Michal/VariDex10/VariDex/venv/bin/python3
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: /media/michal/647A504F7A50205A/GENOME/Michal/VariDex10/VariDex
configfile: pytest.ini
plugins: typeguard-4.4.4, hypothesis-6.151.3, cov-7.0.0
collecting ... collected 16 items

tests/test_integration_e2e.py::TestEndToEndPipeline::test_e2e_single_variant_annotation PASSED [  6%]
tests/test_integration_e2e.py::TestEndToEndPipeline::test_e2e_variant_matching_workflow PASSED [ 12%]
tests/test_integration_e2e.py::TestEndToEndPipeline::test_e2e_multi_source_integration FAILED [ 18%]
tests/test_integration_e2e.py::TestEndToEndPipeline::test_e2e_pipeline_with_filtering PASSED [ 25%]
tests/test_integration_e2e.py::TestEndToEndPipeline::test_e2e_report_generation PASSED [ 31%]
tests/test_integration_e2e.py::TestPerformanceIntegration::test_large_vcf_processing FAILED [ 37%]
tests/test_integration_e2e.py::TestPerformanceIntegration::test_concurrent_matching_performance PASSED [ 43%]
tests/test_integration_e2e.py::TestPerformanceIntegration::test_memory_efficient_processing FAILED [ 50%]
tests/test_integration_e2e.py::TestDataIntegrity::test_roundtrip_vcf_to_dataframe PASSED [ 56%]
tests/test_integration_e2e.py::TestDataIntegrity::test_coordinate_system_consistency PASSED [ 62%]
tests/test_integration_e2e.py::TestDataIntegrity::test_allele_normalization_integrity FAILED [ 68%]
tests/test_integration_e2e.py::TestErrorRecovery::test_pipeline_handles_malformed_input PASSED [ 75%]
tests/test_integration_e2e.py::TestErrorRecovery::test_pipeline_handles_missing_files PASSED [ 81%]
tests/test_integration_e2e.py::TestErrorRecovery::test_pipeline_partial_failure_recovery PASSED [ 87%]
tests/test_integration_e2e.py::TestConfigurationIntegration::test_config_affects_pipeline_behavior PASSED [ 93%]
tests/test_integration_e2e.py::TestConfigurationIntegration::test_config_persistence PASSED [100%]

=================================== FAILURES ===================================
____________ TestEndToEndPipeline.test_e2e_multi_source_integration ____________
tests/test_integration_e2e.py:121: in test_e2e_multi_source_integration
    assert len(annotated) == 1
E   assert 0 == 1
E    +  where 0 = len(Empty DataFrame\nColumns: [CHROM, POS, ID, REF, ALT, QUAL, FILTER, INFO, chromosome, position, reference, alternate, chromosome_ref, position_ref, reference_ref, alternate_ref, clinical_significance, review_status]\nIndex: [])
_____________ TestPerformanceIntegration.test_large_vcf_processing _____________
tests/test_integration_e2e.py:198: in test_large_vcf_processing
    assert len(variants_df) == n_variants
E   assert 1 == 10000
E    +  where 1 = len(  CHROM     POS   ID REF ALT  ...  INFO chromosome position reference  alternate\n0  chr1  100000  rs1   A   G  ...     .       chr1   100000         A          G\n\n[1 rows x 12 columns])
_________ TestPerformanceIntegration.test_memory_efficient_processing __________
tests/test_integration_e2e.py:252: in test_memory_efficient_processing
    assert total_variants == n_variants
E   assert 10000 == 100000
____________ TestDataIntegrity.test_allele_normalization_integrity _____________
tests/test_integration_e2e.py:327: in test_allele_normalization_integrity
    assert (
E   AssertionError: assert ('A' == 'AT'
E     
E     - AT
E     + A or 'AT' == 'A'
E     
E     - A
E     + AT)
=============================== warnings summary ===============================
varidex/core/config.py:764
  /media/michal/647A504F7A50205A/GENOME/Michal/VariDex10/VariDex/varidex/core/config.py:764: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VariDexConfig(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_integration_e2e.py::TestEndToEndPipeline::test_e2e_multi_source_integration - assert 0 == 1
 +  where 0 = len(Empty DataFrame\nColumns: [CHROM, POS, ID, REF, ALT, QUAL, FILTER, INFO, chromosome, position, reference, alternate, chromosome_ref, position_ref, reference_ref, alternate_ref, clinical_significance, review_status]\nIndex: [])
FAILED tests/test_integration_e2e.py::TestPerformanceIntegration::test_large_vcf_processing - assert 1 == 10000
 +  where 1 = len(  CHROM     POS   ID REF ALT  ...  INFO chromosome position reference  alternate\n0  chr1  100000  rs1   A   G  ...     .       chr1   100000         A          G\n\n[1 rows x 12 columns])
FAILED tests/test_integration_e2e.py::TestPerformanceIntegration::test_memory_efficient_processing - assert 10000 == 100000
FAILED tests/test_integration_e2e.py::TestDataIntegrity::test_allele_normalization_integrity - AssertionError: assert ('A' == 'AT'
  
  - AT
  + A or 'AT' == 'A'
  
  - A
  + AT)
=================== 4 failed, 12 passed, 1 warning in 0.45s ====================
